        -:    0:Source:D:/Qt/6.10.1/mingw_64/include/QtGui/qtransform.h
        -:    0:Graph:C:\Users\lenovo\Desktop\Diagramscene_ultima-syz\debug/mainwindow.gcno
        -:    0:Data:C:\Users\lenovo\Desktop\Diagramscene_ultima-syz\debug/mainwindow.gcda
        -:    0:Runs:1
        -:    1:// Copyright (C) 2016 The Qt Company Ltd.
        -:    2:// SPDX-License-Identifier: LicenseRef-Qt-Commercial OR LGPL-3.0-only OR GPL-2.0-only OR GPL-3.0-only
        -:    3:#ifndef QTRANSFORM_H
        -:    4:#define QTRANSFORM_H
        -:    5:
        -:    6:#include <QtGui/qtguiglobal.h>
        -:    7:#include <QtGui/qpolygon.h>
        -:    8:#include <QtGui/qregion.h>
        -:    9:#include <QtGui/qwindowdefs.h>
        -:   10:#include <QtCore/qline.h>
        -:   11:#include <QtCore/qpoint.h>
        -:   12:#include <QtCore/qrect.h>
        -:   13:
        -:   14:QT_BEGIN_NAMESPACE
        -:   15:
        -:   16:class QVariant;
        -:   17:class QPainterPath;
        -:   18:
        -:   19:class Q_GUI_EXPORT QTransform
        -:   20:{
        -:   21:public:
        -:   22:    enum TransformationType {
        -:   23:        TxNone      = 0x00,
        -:   24:        TxTranslate = 0x01,
        -:   25:        TxScale     = 0x02,
        -:   26:        TxRotate    = 0x04,
        -:   27:        TxShear     = 0x08,
        -:   28:        TxProject   = 0x10
        -:   29:    };
        -:   30:
        -:   31:    inline explicit QTransform(Qt::Initialization) {}
        -:   32:    inline QTransform()
        -:   33:        : m_matrix{ {1, 0, 0}, {0, 1, 0}, {0, 0, 1} }
        -:   34:        , m_type(TxNone)
        -:   35:        , m_dirty(TxNone) {}
        -:   36:    QTransform(qreal h11, qreal h12, qreal h13,
        -:   37:               qreal h21, qreal h22, qreal h23,
        -:   38:               qreal h31, qreal h32, qreal h33)
        -:   39:        : m_matrix{ {h11, h12, h13}, {h21, h22, h23}, {h31, h32, h33} }
        -:   40:        , m_type(TxNone)
        -:   41:        , m_dirty(TxProject) {}
        -:   42:    QTransform(qreal h11, qreal h12, qreal h21,
        -:   43:               qreal h22, qreal dx, qreal dy)
        -:   44:        : m_matrix{ {h11, h12, 0}, {h21, h22, 0}, {dx, dy, 1} }
        -:   45:        , m_type(TxNone)
        -:   46:        , m_dirty(TxShear) {}
        -:   47:
        -:   48:    QTransform &operator=(QTransform &&other) noexcept = default;
        -:   49:    QTransform &operator=(const QTransform &) noexcept = default;
        -:   50:    QTransform(QTransform &&other) noexcept = default;
        -:   51:    QTransform(const QTransform &other) noexcept = default;
        -:   52:
        -:   53:    bool isAffine() const;
        -:   54:    bool isIdentity() const;
        -:   55:    bool isInvertible() const;
        -:   56:    bool isScaling() const;
        -:   57:    bool isRotating() const;
        -:   58:    bool isTranslating() const;
        -:   59:
        -:   60:    TransformationType type() const;
        -:   61:
        -:   62:    inline qreal determinant() const;
        -:   63:
        -:   64:    qreal m11() const;
        -:   65:    qreal m12() const;
        -:   66:    qreal m13() const;
        -:   67:    qreal m21() const;
        -:   68:    qreal m22() const;
        -:   69:    qreal m23() const;
        -:   70:    qreal m31() const;
        -:   71:    qreal m32() const;
        -:   72:    qreal m33() const;
        -:   73:    qreal dx() const;
        -:   74:    qreal dy() const;
        -:   75:
        -:   76:    void setMatrix(qreal m11, qreal m12, qreal m13,
        -:   77:                   qreal m21, qreal m22, qreal m23,
        -:   78:                   qreal m31, qreal m32, qreal m33);
        -:   79:
        -:   80:    [[nodiscard]] QTransform inverted(bool *invertible = nullptr) const;
        -:   81:    [[nodiscard]] QTransform adjoint() const;
        -:   82:    [[nodiscard]] QTransform transposed() const;
        -:   83:
        -:   84:    QTransform &translate(qreal dx, qreal dy);
        -:   85:    QTransform &scale(qreal sx, qreal sy);
        -:   86:    QTransform &shear(qreal sh, qreal sv);
        -:   87:#if QT_VERSION < QT_VERSION_CHECK(7, 0, 0)
        -:   88:    QTransform &rotate(qreal a, Qt::Axis axis, qreal distanceToPlane);
        -:   89:    // ### Qt7: Remove
        -:   90:    QTransform &rotate(qreal a, Qt::Axis axis = Qt::ZAxis);
        -:   91:    QTransform &rotateRadians(qreal a, Qt::Axis axis, qreal distanceToPlane);
        -:   92:    // ### Qt7: Remove
        -:   93:    QTransform &rotateRadians(qreal a, Qt::Axis axis = Qt::ZAxis);
        -:   94:#else
        -:   95:    QTransform &rotate(qreal a, Qt::Axis axis = Qt::ZAxis, qreal distanceToPlane = 1024.0f);
        -:   96:    QTransform &rotateRadians(qreal a, Qt::Axis axis = Qt::ZAxis, qreal distanceToPlane = 1024.0f);
        -:   97:#endif
        -:   98:
        -:   99:    static bool squareToQuad(const QPolygonF &square, QTransform &result);
        -:  100:    static bool quadToSquare(const QPolygonF &quad, QTransform &result);
        -:  101:    static bool quadToQuad(const QPolygonF &one,
        -:  102:                           const QPolygonF &two,
        -:  103:                           QTransform &result);
        -:  104:
        -:  105:    bool operator==(const QTransform &) const;
        -:  106:    bool operator!=(const QTransform &) const;
        -:  107:
        -:  108:    QTransform &operator*=(const QTransform &);
        -:  109:    QTransform operator*(const QTransform &o) const;
        -:  110:
        -:  111:    operator QVariant() const;
        -:  112:
        -:  113:    void reset();
        -:  114:    QPoint       map(const QPoint &p) const;
        -:  115:    QPointF      map(const QPointF &p) const;
        -:  116:    QLine        map(const QLine &l) const;
        -:  117:    QLineF       map(const QLineF &l) const;
        -:  118:    QPolygonF    map(const QPolygonF &a) const;
        -:  119:    QPolygon     map(const QPolygon &a) const;
        -:  120:    QRegion      map(const QRegion &r) const;
        -:  121:    QPainterPath map(const QPainterPath &p) const;
        -:  122:    QPolygon     mapToPolygon(const QRect &r) const;
        -:  123:    QRect mapRect(const QRect &) const;
        -:  124:    QRectF mapRect(const QRectF &) const;
        -:  125:    void map(int x, int y, int *tx, int *ty) const;
        -:  126:    void map(qreal x, qreal y, qreal *tx, qreal *ty) const;
        -:  127:
        -:  128:    QTransform &operator*=(qreal div);
        -:  129:    QTransform &operator/=(qreal div);
        -:  130:    QTransform &operator+=(qreal div);
        -:  131:    QTransform &operator-=(qreal div);
        -:  132:
        -:  133:    static QTransform fromTranslate(qreal dx, qreal dy);
        -:  134:    static QTransform fromScale(qreal dx, qreal dy);
        -:  135:
        -:  136:private:
        -:  137:    struct Affine {
        -:  138:             qreal (& m_matrix)[3][3];
        -:  139:        };
        -:  140:
        -:  141:public:
        -:  142:    auto asAffineMatrix() { return Affine { m_matrix }; }
        -:  143:    friend Q_GUI_EXPORT QDataStream &operator>>(QDataStream &s, Affine &m);
        -:  144:    friend Q_GUI_EXPORT QDataStream &operator<<(QDataStream &s, const Affine &m);
        -:  145:
        -:  146:private:
        -:  147:    inline TransformationType inline_type() const;
        -:  148:    void do_map(qreal x, qreal y, qreal &nx, qreal &ny) const;
        -:  149:    qreal m_matrix[3][3];
        -:  150:
        -:  151:    mutable uint m_type : 5;
        -:  152:    mutable uint m_dirty : 5;
        -:  153:};
        -:  154:Q_DECLARE_TYPEINFO(QTransform, Q_RELOCATABLE_TYPE);
        -:  155:
        -:  156:Q_GUI_EXPORT Q_DECL_CONST_FUNCTION size_t qHash(const QTransform &key, size_t seed = 0) noexcept;
        -:  157:
        -:  158:/******* inlines *****/
        -:  159:inline QTransform::TransformationType QTransform::inline_type() const
        -:  160:{
        -:  161:    if (m_dirty == TxNone)
        -:  162:        return static_cast<TransformationType>(m_type);
        -:  163:    return type();
        -:  164:}
        -:  165:
        -:  166:inline bool QTransform::isAffine() const
        -:  167:{
        -:  168:    return inline_type() < TxProject;
        -:  169:}
        -:  170:inline bool QTransform::isIdentity() const
        -:  171:{
        -:  172:    return inline_type() == TxNone;
        -:  173:}
        -:  174:
        -:  175:inline bool QTransform::isInvertible() const
        -:  176:{
        -:  177:    return !qFuzzyIsNull(determinant());
        -:  178:}
        -:  179:
        -:  180:inline bool QTransform::isScaling() const
        -:  181:{
        -:  182:    return type() >= TxScale;
        -:  183:}
        -:  184:inline bool QTransform::isRotating() const
        -:  185:{
        -:  186:    return inline_type() >= TxRotate;
        -:  187:}
        -:  188:
        -:  189:inline bool QTransform::isTranslating() const
        -:  190:{
        -:  191:    return inline_type() >= TxTranslate;
        -:  192:}
        -:  193:
        -:  194:inline qreal QTransform::determinant() const
        -:  195:{
        -:  196:    return m_matrix[0][0] * (m_matrix[2][2] * m_matrix[1][1] - m_matrix[2][1] * m_matrix[1][2]) -
        -:  197:           m_matrix[1][0] * (m_matrix[2][2] * m_matrix[0][1] - m_matrix[2][1] * m_matrix[0][2]) +
        -:  198:           m_matrix[2][0] * (m_matrix[1][2] * m_matrix[0][1] - m_matrix[1][1] * m_matrix[0][2]);
        -:  199:}
        -:  200:inline qreal QTransform::m11() const
        -:  201:{
        -:  202:    return m_matrix[0][0];
        -:  203:}
        -:  204:inline qreal QTransform::m12() const
        -:  205:{
        -:  206:    return m_matrix[0][1];
        -:  207:}
        -:  208:inline qreal QTransform::m13() const
        -:  209:{
        -:  210:    return m_matrix[0][2];
        -:  211:}
        -:  212:inline qreal QTransform::m21() const
        -:  213:{
        -:  214:    return m_matrix[1][0];
        -:  215:}
        -:  216:inline qreal QTransform::m22() const
        -:  217:{
        -:  218:    return m_matrix[1][1];
        -:  219:}
        -:  220:inline qreal QTransform::m23() const
        -:  221:{
        -:  222:    return m_matrix[1][2];
        -:  223:}
        -:  224:inline qreal QTransform::m31() const
        -:  225:{
        -:  226:    return m_matrix[2][0];
        -:  227:}
        -:  228:inline qreal QTransform::m32() const
        -:  229:{
        -:  230:    return m_matrix[2][1];
        -:  231:}
        -:  232:inline qreal QTransform::m33() const
        -:  233:{
        -:  234:    return m_matrix[2][2];
        -:  235:}
    #####:  236:inline qreal QTransform::dx() const
        -:  237:{
    #####:  238:    return m_matrix[2][0];
        -:  239:}
    #####:  240:inline qreal QTransform::dy() const
        -:  241:{
    #####:  242:    return m_matrix[2][1];
        -:  243:}
        -:  244:
        -:  245:QT_WARNING_PUSH
        -:  246:QT_WARNING_DISABLE_FLOAT_COMPARE
        -:  247:
        -:  248:inline QTransform &QTransform::operator*=(qreal num)
        -:  249:{
        -:  250:    if (num == 1.)
        -:  251:        return *this;
        -:  252:    m_matrix[0][0] *= num;
        -:  253:    m_matrix[0][1] *= num;
        -:  254:    m_matrix[0][2] *= num;
        -:  255:    m_matrix[1][0] *= num;
        -:  256:    m_matrix[1][1] *= num;
        -:  257:    m_matrix[1][2] *= num;
        -:  258:    m_matrix[2][0] *= num;
        -:  259:    m_matrix[2][1] *= num;
        -:  260:    m_matrix[2][2] *= num;
        -:  261:    if (m_dirty < TxScale)
        -:  262:        m_dirty = TxScale;
        -:  263:    return *this;
        -:  264:}
        -:  265:inline QTransform &QTransform::operator/=(qreal div)
        -:  266:{
        -:  267:    if (div == 0)
        -:  268:        return *this;
        -:  269:    div = 1/div;
        -:  270:    return operator*=(div);
        -:  271:}
        -:  272:inline QTransform &QTransform::operator+=(qreal num)
        -:  273:{
        -:  274:    if (num == 0)
        -:  275:        return *this;
        -:  276:    m_matrix[0][0] += num;
        -:  277:    m_matrix[0][1] += num;
        -:  278:    m_matrix[0][2] += num;
        -:  279:    m_matrix[1][0] += num;
        -:  280:    m_matrix[1][1] += num;
        -:  281:    m_matrix[1][2] += num;
        -:  282:    m_matrix[2][0] += num;
        -:  283:    m_matrix[2][1] += num;
        -:  284:    m_matrix[2][2] += num;
        -:  285:    m_dirty     = TxProject;
        -:  286:    return *this;
        -:  287:}
        -:  288:inline QTransform &QTransform::operator-=(qreal num)
        -:  289:{
        -:  290:    if (num == 0)
        -:  291:        return *this;
        -:  292:    m_matrix[0][0] -= num;
        -:  293:    m_matrix[0][1] -= num;
        -:  294:    m_matrix[0][2] -= num;
        -:  295:    m_matrix[1][0] -= num;
        -:  296:    m_matrix[1][1] -= num;
        -:  297:    m_matrix[1][2] -= num;
        -:  298:    m_matrix[2][0] -= num;
        -:  299:    m_matrix[2][1] -= num;
        -:  300:    m_matrix[2][2] -= num;
        -:  301:    m_dirty     = TxProject;
        -:  302:    return *this;
        -:  303:}
        -:  304:
        -:  305:QT_WARNING_POP
        -:  306:
        -:  307:inline bool qFuzzyCompare(const QTransform& t1, const QTransform& t2) noexcept
        -:  308:{
        -:  309:    return qFuzzyCompare(t1.m11(), t2.m11())
        -:  310:        && qFuzzyCompare(t1.m12(), t2.m12())
        -:  311:        && qFuzzyCompare(t1.m13(), t2.m13())
        -:  312:        && qFuzzyCompare(t1.m21(), t2.m21())
        -:  313:        && qFuzzyCompare(t1.m22(), t2.m22())
        -:  314:        && qFuzzyCompare(t1.m23(), t2.m23())
        -:  315:        && qFuzzyCompare(t1.m31(), t2.m31())
        -:  316:        && qFuzzyCompare(t1.m32(), t2.m32())
        -:  317:        && qFuzzyCompare(t1.m33(), t2.m33());
        -:  318:}
        -:  319:
        -:  320:
        -:  321:/****** stream functions *******************/
        -:  322:#ifndef QT_NO_DATASTREAM
        -:  323:Q_GUI_EXPORT QDataStream &operator<<(QDataStream &, const QTransform &);
        -:  324:Q_GUI_EXPORT QDataStream &operator>>(QDataStream &, QTransform &);
        -:  325:#endif
        -:  326:
        -:  327:#ifndef QT_NO_DEBUG_STREAM
        -:  328:Q_GUI_EXPORT QDebug operator<<(QDebug, const QTransform &);
        -:  329:#endif
        -:  330:/****** end stream functions *******************/
        -:  331:
        -:  332:// mathematical semantics
        -:  333:inline QPoint operator*(const QPoint &p, const QTransform &m)
        -:  334:{ return m.map(p); }
        -:  335:inline QPointF operator*(const QPointF &p, const QTransform &m)
        -:  336:{ return m.map(p); }
        -:  337:inline QLineF operator*(const QLineF &l, const QTransform &m)
        -:  338:{ return m.map(l); }
        -:  339:inline QLine operator*(const QLine &l, const QTransform &m)
        -:  340:{ return m.map(l); }
        -:  341:inline QPolygon operator *(const QPolygon &a, const QTransform &m)
        -:  342:{ return m.map(a); }
        -:  343:inline QPolygonF operator *(const QPolygonF &a, const QTransform &m)
        -:  344:{ return m.map(a); }
        -:  345:inline QRegion operator *(const QRegion &r, const QTransform &m)
        -:  346:{ return m.map(r); }
        -:  347:
        -:  348:inline QTransform operator *(const QTransform &a, qreal n)
        -:  349:{ QTransform t(a); t *= n; return t; }
        -:  350:inline QTransform operator /(const QTransform &a, qreal n)
        -:  351:{ QTransform t(a); t /= n; return t; }
        -:  352:inline QTransform operator +(const QTransform &a, qreal n)
        -:  353:{ QTransform t(a); t += n; return t; }
        -:  354:inline QTransform operator -(const QTransform &a, qreal n)
        -:  355:{ QTransform t(a); t -= n; return t; }
        -:  356:
        -:  357:QT_END_NAMESPACE
        -:  358:
        -:  359:#endif // QTRANSFORM_H
