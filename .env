# 复制为 .env 后生效（无需在终端手动设置环境变量）
# 注意：不要把真实 key 提交到仓库

# OpenAI 兼容接口
QT_TEST_AI_LLM_BASE_URL=https://api.deepseek.com
QT_TEST_AI_LLM_MODEL=deepseek-chat
QT_TEST_AI_LLM_API_KEY=sk-8e5bec0a8c454c758cc8c06e7da33ebb

# 可选：LLM 请求超时（秒）。模型输出较长时建议调大，例如 120/300。
QT_TEST_AI_LLM_TIMEOUT_S=300

# 可选：自定义系统提示词（不填也能用）
QT_TEST_AI_LLM_SYSTEM_PROMPT="你是资深 C++/Qt 测试工程师（QtTest/QTest）。你只输出严格 JSON（不要 Markdown、不要解释文字）。输出必须是一个 JSON 对象，包含字段：schema（字符串）、files（数组）、build_hints（字符串）。files 每个元素必须是对象：name（相对路径文件名，.cpp/.h/.hpp 之一）、content（完整源码字符串）。files 至少包含 1 个 .cpp；每个 .cpp 必须包含 <QtTest>，并使用 QObject 测试类 + QTEST_MAIN 或 QTEST_APPLESS_MAIN，确保在 qmake+MinGW 下尽量可编译。优先为工程中可见的非 UI 逻辑编写可运行断言（解析/算法/工具类/纯函数等）；不要臆造未在上下文中出现的类/函数/头文件。若确实缺少可测入口，请生成最小可运行的 smoke/占位测试，并在 build_hints 中明确说明你假设的依赖、需要补充的 include 或需要把被测源码加入测试工程的方式。"

# 可选：启用自动化测试/覆盖率阶段（默认关闭）
# 开启后，“一键运行”会额外执行：LLM 生成 QtTest 用例文件 + 测试命令 + 覆盖率命令
QT_TEST_AI_ENABLE_AUTOMATION=1

# 可选：在被测项目根目录执行的测试命令（示例：ctest -C Debug）
# 说明：你的环境里 qmake 不在 PATH，因此这里显式注入 Qt/MinGW 路径。
QT_TEST_AI_TEST_CMD=cmd /c "set PATH=D:/Qt/6.10.1/mingw_64/bin;D:/Qt/Tools/mingw1310_64/bin;%PATH% && cd /d D:/qt_project/Diagramscene_ultima/tests/build/Desktop_Qt_6_10_1_MinGW_64_bit-Debug/debug && D:/Qt/6.10.1/mingw_64/bin/qmake.exe D:/qt_project/Diagramscene_ultima/tests/tests.pro -r QMAKE_CXXFLAGS+=-O0 QMAKE_CXXFLAGS+=-g QMAKE_CXXFLAGS+=--coverage QMAKE_LFLAGS+=--coverage && D:/Qt/Tools/mingw1310_64/bin/mingw32-make.exe clean && D:/Qt/Tools/mingw1310_64/bin/mingw32-make.exe -j && .\test_diagramitems.exe"
QT_TEST_AI_TEST_TIMEOUT_S=600

# 可选：在被测项目根目录执行的覆盖率命令（示例：gcovr -r . --txt）
# 说明：显式指定 gcov.exe，避免环境 PATH 不一致。
QT_TEST_AI_COVERAGE_CMD=gcovr -r . --object-directory tests/build/Desktop_Qt_6_10_1_MinGW_64_bit-Debug/debug --gcov-executable D:/Qt/Tools/mingw1310_64/bin/gcov.exe --exclude-directories .git --exclude-directories .venv --exclude-directories tools --exclude-directories generated_tests --print-summary --html-details -o coverage.html
QT_TEST_AI_COVERAGE_TIMEOUT_S=600

# ------------------------------
# qmake + MinGW + gcovr 示例（按需改路径）
# 说明：工具内部用 shell=True 在 Windows 上通常走 cmd.exe；因此这里示例用 cmd /c "..."。
# 覆盖率前提：必须用 --coverage 重新编译，并且先运行测试以生成 .gcda 文件。
#
# 1) 测试命令示例：清理后用覆盖率编译，再运行你的 QtTest 可执行文件（把 .\tests\tst_all.exe 换成实际路径）
# QT_TEST_AI_TEST_CMD=cmd /c "qmake -r QMAKE_CXXFLAGS+=-O0 QMAKE_CXXFLAGS+=-g QMAKE_CXXFLAGS+=--coverage QMAKE_LFLAGS+=--coverage && mingw32-make clean && mingw32-make -j && .\\tests\\tst_all.exe"
#
# 2) 覆盖率命令示例：生成 HTML 详情 + 控制台摘要（确保 gcovr 在 PATH，或写绝对路径到 gcovr.exe）
# QT_TEST_AI_COVERAGE_CMD=cmd /c "gcovr -r . --gcov-executable gcov --exclude-directories .git --exclude-directories build --exclude-directories .venv --exclude-directories generated_tests --print-summary --html-details -o coverage.html"
#
# 3) 若你是 shadow build（例如输出在 build_debug/ 目录），可加：--object-directory build_debug
# QT_TEST_AI_COVERAGE_CMD=cmd /c "gcovr -r . --object-directory build_debug --gcov-executable gcov --print-summary --html-details -o coverage.html"
